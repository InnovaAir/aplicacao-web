<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Novos Cadastros</title>
  <link rel="stylesheet" href="../styles/MenuLateral.css">
  <link rel="stylesheet" href="../styles/Dashboard.css">
  <link rel="stylesheet" href="../styles/menu_mobile.css">
  <script src="../js/animacaoMenu.js"></script>
  <link rel="icon" href="../public/assets/favicon.ico" type="favicon">
  <!-- Font Awesome (ícones) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>


</head>

<body>
  <button class="botao_abrir" onclick="abrirMenu()">☰</button>

  <div class="barra_lateral" id="menu">
    <div class="fechar_barrinha">
      <button class="botao_fechar" onclick="fecharMenu()">✖</button>
    </div>
    <div class="logo_container">
      <img src="../assets/InnovaairWhite.png" alt="" />
    </div>


    <span id="user_logado">Olá, Usuário</span>
    <div class="opcoes">
      <div class="container1">
        <u>
          <li><a href="visaoGeral.html">Visão geral</a></li>
          <li><a href="tempoReal.html" class="agora">Tempo real</a></li>
          <li><a href="listaMaquinas.html">Lista de máquinas</a></li>
          <li><a href="CadastrarMaquina.html">Cadastrar Máquina</a></li>
          <li><a href="suporte.html">Suporte</a></li>
        </u>
      </div>
      <div class="container2">
        <u>
          <li><a href="suporte.html">Fale conosco!</a></li>
        </u>
      </div>
    </div>
  </div>
  <div class="menu_mobile">
    <button class="botao_menu_mobile" onclick="abrirMenuMobile()">☰</button>
    <div class="logo_container">
      <img src="../assets/InnovaairWhite.png" alt="" />
    </div>

  </div>
  <div class="novo_menu">
    <a href="visaoGeral.html">Visão geral</a>
    <a href="tempoReal.html" class="agora">Tempo real</a>
    <a href="listaMaquinas.html">Lista de máquinas</a>
    <a href="NovosCadastros.html">Cadastros</a>
    <a href="suporte.html">Suporte</a>
    <a href="suporte.html">Fale conosco!</a>
  </div>
  <div class="tela" id="tela">

    <h1>DASHBOARD DE SUPORTE EM TEMPO REAL</h1>
    <div class="box_graficos_kpis">
      <div class=kpis>
        <div class="kpi">
          <canvas id="graficoPercentualMaquinas">

          </canvas>

        </div>

        <div class="kpi dois">
          <h1>Número de máquinas</h1>
          <p>23</p>
        </div>
      </div>

      <div class="graficos">
        <div class="grafico-linear">
          <span class="titulo">Lista de incidentes abertos</span>
          <ul class="lista_incidentes">
            <li>
              <p>CDA 5 - CPU acima de 85% na máquina recepção 10</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 3 - Memória RAM em uso: 14GB de 16GB (88%) no servidor de backup</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 2 - Uso de Disco C: 92% (460GB de 500GB usados) no servidor principal</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 7 - CPU acima de 90% no servidor de aplicações</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 4 - Memória RAM em uso: 31GB de 32GB (97%) no banco de dados</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 6 - Uso de Disco D: 87% (870GB de 1TB usados) no servidor de arquivos</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 8 - CPU acima de 80% no firewall corporativo</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 9 - Uso de Disco E: 95% (950GB de 1TB usados) no servidor de logs</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 10 - Memória RAM em uso: 24GB de 32GB (75%) no servidor web</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
            <li>
              <p>CDA 11 - CPU acima de 95% no servidor de virtualização</p>
              <div class="icons">
                <i class="fa-solid fa-eye"></i>
                <i class="fa-solid fa-check"></i>
              </div>
            </li>
          </ul>


        </div>

        <div class="ranking-incidentes">
          <span class="titulo">Máquinas ligadas a mais tempo</span>
          <ul class="lista_maquinas">
            <li>Máquina Recepção 10 - 23:50:12 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 9 - 23:30:45 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 8 - 23:05:27 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 7 - 22:40:33 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 6 - 22:15:50 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 5 - 21:55:10 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 4 - 21:30:20 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 3 - 21:05:40 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 2 - 20:45:15 - <a href="dispositivo.html">Acessar</a></li>
            <li>Máquina Recepção 1 - 20:20:05 - <a href="dispositivo.html">Acessar</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
<script>
  const graficoPercentualMaquinas = document.getElementById('graficoPercentualMaquinas');
  Chart.register(ChartDataLabels);

  new Chart(graficoPercentualMaquinas, {
    type: 'pie',
    data: {
      labels: [
        'Saudável',
        'Não saudável'
      ],
      datasets: [{
        label: 'Percentual (%)',
        data: [97, 3],
        backgroundColor: [
          'rgb(0, 128, 0)',
          'rgb(255, 0, 0)'
        ]
      }]
    },
    options: {
      plugins: {
        title: {
          display: true,
          text: 'Estado das máquinas'
        },
        datalabels: {
          color: '#fff',
          font: {
            weight: 'bold',
            size: 18
          },
          formatter: (value, ctx) => {
            let dataset = ctx.chart.data.datasets[0];
            let total = dataset.data.reduce((acc, val) => acc + val, 0);
            let percentage = ((value / total) * 100).toFixed(1) + "%"; 
            return percentage;
          }
        }
      }
    }
  })


  abrirMenu();
</script>